import{r as x,h as _,j as e}from"./index-3A09cUbM.js";import{R as P}from"./index-CvDgyKB_.js";/* empty css                */import{q as S}from"./api-C4k75cI7.js";import{C as q,a as w}from"./CCardBody-DdaEBaou.js";import{C as D}from"./CCardHeader-Bu22E4w2.js";import{C as A}from"./CAlert-sFHJNdHb.js";import{C as B}from"./CForm-DJOxvjjk.js";import{C as g,a as o}from"./CRow-BfEtOW1P.js";import{C as n}from"./CFormLabel-B_OJKCp0.js";import{C as f}from"./CFormInput-QjOR5tjN.js";import{C as I}from"./CFormSelect-CFN7fx1q.js";import{a as L}from"./CButton-BYqVqqgt.js";import"./isEqual-CmEGHZs6.js";import"./DefaultLayout-VXqgv9-I.js";import"./CContainer-C94Klz2v.js";import"./index.esm-2A5IUDPe.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-BpSKKtIp.js";import"./CFormControlValidation-nl5jGPsb.js";const te=()=>{const[i,m]=x.useState({title:"",image:null,imageFile:null,description:"",date:"",sports_name:""}),[t,j]=x.useState({title:"",description:"",date:"",sports_name:"",images:""}),[h,F]=x.useState({visible:!1,color:"",message:""}),b=_(),c=(r,s)=>{F({visible:!0,color:r,message:s}),setTimeout(()=>F({visible:!1,color:"",message:""}),5e3)},u=r=>{const{name:s,value:p}=r.target;m({...i,[s]:p})},k=r=>{const s=r.target.files[0];s&&(m({...i,image:{url:URL.createObjectURL(s),filename:s.name},imageFile:s}),t.images&&j({...t,images:""}))},N=()=>{m({...i,image:null,imageFile:null})},y=async r=>{var p,v,C;r.preventDefault();const s={};if(i.title.trim()||(s.title="Title is required"),i.description.trim()||(s.description="Description is required"),i.date||(s.date="Date is required"),i.sports_name||(s.sports_name="Sport name is required"),i.imageFile===null&&(s.images="Image is required"),Object.keys(s).length>0){j(s),c("danger","Please fill in all required fields");return}try{const a=new FormData;a.append("title",i.title),a.append("date",i.date),a.append("description",i.description),a.append("sports_name",i.sports_name),console.log("File to upload:",i.imageFile),console.log("File name:",(p=i.imageFile)==null?void 0:p.name),console.log("File size:",(v=i.imageFile)==null?void 0:v.size),console.log("File type:",(C=i.imageFile)==null?void 0:C.type),i.imageFile&&a.append("file",i.imageFile),console.log("FormData contents:");for(let l of a.entries())console.log(`${l[0]}:`,l[1]),l[1]instanceof File&&console.log(`  File details - Name: ${l[1].name}, Size: ${l[1].size}, Type: ${l[1].type}`);const d=await S(a);d&&d.status===201?(c("success","Free Pick saved successfully!"),b("/list-free-picks"),m({title:"",sports_name:"",description:"",date:"",image:null,imageFile:null})):c("danger",`Error: ${(d==null?void 0:d.error)||"Failed to save Free Pick"}`)}catch(a){console.error("Submit error:",a),c("danger",`Error: ${a.message||"Unknown error"}`)}};return e.jsxs(q,{children:[e.jsx(D,{children:e.jsx("h3",{children:"Add New Free Pick"})}),e.jsxs(w,{children:[h.visible&&e.jsx(A,{color:h.color,children:h.message}),e.jsxs(B,{encType:"multipart/form-data",children:[e.jsxs(g,{className:"mb-3",children:[e.jsxs(o,{md:6,children:[e.jsx(n,{htmlFor:"title",children:"Pick Title"}),e.jsx(f,{type:"text",name:"title",id:"title",value:i.title,onChange:u,required:!0,invalid:!!t.title}),t.title&&e.jsx("div",{className:"invalid-feedback d-block",children:t.title})]}),e.jsxs(o,{md:6,children:[e.jsx(n,{htmlFor:"date",children:"Date"}),e.jsx(f,{type:"date",name:"date",id:"date",value:i.date,onChange:u,required:!0,invalid:!!t.date}),t.date&&e.jsx("div",{className:"invalid-feedback d-block",children:t.date})]})]}),e.jsxs(g,{className:"mb-3",children:[e.jsxs(o,{md:6,children:[e.jsx(n,{htmlFor:"sports_name",children:"Sport Name"}),e.jsxs(I,{name:"sports_name",id:"sports_name",value:i.sports_name,onChange:u,required:!0,invalid:!!t.sports_name,children:[e.jsx("option",{value:"",children:"Select a sport"}),e.jsx("option",{value:"MLB",children:"MLB"}),e.jsx("option",{value:"NBA",children:"NBA"}),e.jsx("option",{value:"NHL",children:"NHL"})]}),t.sports_name&&e.jsx("div",{className:"invalid-feedback d-block",children:t.sports_name})]}),e.jsxs(o,{md:6,children:[e.jsx(n,{htmlFor:"image",children:"Pick Image"}),e.jsx(f,{type:"file",name:"image",id:"image",accept:"image/*",onChange:k,invalid:!!t.images}),t.images&&e.jsx("div",{className:"invalid-feedback d-block",children:t.images})]})]}),i.image&&e.jsx(g,{className:"mb-3",children:e.jsxs(o,{md:12,children:[e.jsx(n,{children:"Selected Image:"}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("img",{src:i.image.url,alt:"Preview",style:{width:"100px",height:"100px",objectFit:"cover"},className:"rounded"}),e.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:N,children:"Remove Image"})]})]})}),e.jsx(g,{className:"mb-3",children:e.jsxs(o,{md:12,children:[e.jsx(n,{htmlFor:"description",children:"Pick Description"}),e.jsx(P,{theme:"snow",value:i.description,onChange:r=>m({...i,description:r}),placeholder:"Write pick content here...",style:{height:"200px",marginBottom:"50px"}}),t.description&&e.jsx("div",{className:"text-danger mt-2",children:t.description})]})}),e.jsx(L,{type:"button",onClick:y,color:"primary",children:"Submit Free Pick"})]})]})]})};export{te as default};
