import{r as l,h as Y,j as e,C as $}from"./index-DpUBz1Bw.js";/* empty css              */import{C as y}from"./index.esm-Dbi6wqYs.js";import{g as O,d as W}from"./api-DqsSHhUP.js";import{C as q,a as z,b as G}from"./CToaster-C8eZlaKr.js";import{C as I,a as J}from"./CCardBody-DZqTotfL.js";import{C as K}from"./CCardHeader-BMSJ96uK.js";import{C as Q,a as X,b as T,c as r,d as Z,e as i}from"./CTable-CkekpDxI.js";import{C as ee}from"./CImage-Bx_Kh1d7.js";import{c as se,a as ae}from"./cil-trash-prAk5aip.js";import{C as k,a as D,b as N,c as w,d as te}from"./CModalTitle-BwGBWCY9.js";import{C as x}from"./CFormInput-Bz4Fy2l4.js";import{C as le}from"./CFormTextarea-DxUjhWrK.js";import{a as u}from"./CButton-DpMoyj-k.js";import"./DefaultLayout-W0eQhKXY.js";import"./CContainer-CFg3_gcl.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-CerQkfsb.js";import"./CFormControlValidation-D6q-PwAV.js";import"./CFormLabel-BE9SeOwX.js";const De=()=>{var v;const[p,j]=l.useState([]),[S,M]=l.useState(!0),[C,f]=l.useState(null),[P,d]=l.useState(!1),[t,n]=l.useState(null),[_,c]=l.useState(!1),[b,h]=l.useState(null),[g,E]=l.useState(0);Y(),l.useEffect(()=>{B()},[]);const B=async()=>{try{const s=localStorage.getItem("accessToken")||"",a=await O(s);a&&a.status===200?j(a.data):f("Unexpected data format")}catch(s){f("Error fetching data"),console.error(s)}finally{M(!1)}},m=(s,a="success")=>{E(e.jsx(z,{autohide:!0,delay:3e3,color:a,className:"text-white align-items-center",children:e.jsx("div",{className:"d-flex",children:e.jsx(G,{children:s})})},g))},L=s=>s?[".mp4",".avi",".mov",".wmv",".flv",".mkv"].some(o=>s.toLowerCase().endsWith(o)):!1,F=s=>s?new Date(s).toISOString().split("T")[0]:"",H=s=>{n(s),d(!0)},V=s=>{h(s),c(!0)},A=async()=>{var s;try{const a=localStorage.getItem("accessToken")||"",o=await W(b,a);o.data.status===204?(j(R=>R.filter(U=>U.id!==b)),c(!1),h(null),m("Pick deleted successfully","success")):(m(((s=o==null?void 0:o.data)==null?void 0:s.message)||"Failed to delete pick","danger"),c(!1),h(null))}catch(a){console.error("Delete error:",a),m("An error occurred while deleting the pick","danger"),c(!1),h(null)}};return e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"p-3",placement:"top-end",push:g}),e.jsxs(I,{className:"mb-4",children:[e.jsx(K,{className:"d-flex justify-content-between align-items-center",children:e.jsx("h3",{children:"Recent Added Pick"})}),e.jsx(J,{children:S?e.jsxs("div",{className:"text-center py-5",children:[e.jsx($,{color:"primary"}),e.jsx("p",{className:"mt-3",children:"Loading data..."})]}):C?e.jsx("div",{className:"text-danger text-center py-4",children:C}):p.length>0?e.jsxs(Q,{hover:!0,striped:!0,responsive:!0,className:"table table-hover table-striped custom-table",children:[e.jsx(X,{children:e.jsxs(T,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Price ($)"}),e.jsx(r,{children:"Duration"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Upload Date"}),e.jsx(r,{children:"Media"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(Z,{children:p.map((s,a)=>e.jsxs(T,{children:[e.jsx(r,{children:a+1}),e.jsx(i,{children:s.title}),e.jsx(i,{children:s.price}),e.jsx(i,{children:s.time_duration}),e.jsx(i,{children:e.jsx("div",{className:"ellipsis",dangerouslySetInnerHTML:{__html:s.description}})}),e.jsx(i,{children:F(s.uploaded_at)}),e.jsx(i,{children:L(s.file_url)?e.jsxs("video",{width:"100",controls:!0,children:[e.jsx("source",{src:s.file_url,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx(ee,{src:s.file_url,alt:s.media_file||"media",width:100,thumbnail:!0})}),e.jsxs(i,{children:[e.jsx(y,{icon:se,className:"me-2 text-primary",role:"button",onClick:()=>H(s)}),e.jsx(y,{icon:ae,className:"text-danger",role:"button",onClick:()=>V(s.id)})]})]},s.id))})]}):e.jsx("div",{className:"text-center py-5",children:"No blog posts found"})})]}),e.jsxs(k,{visible:P,onClose:()=>d(!1),children:[e.jsx(D,{closeButton:!0,children:"Edit Pick"}),e.jsxs(N,{children:[e.jsx(x,{label:"Title",value:(t==null?void 0:t.title)||"",onChange:s=>n(a=>({...a,title:s.target.value})),className:"mb-3"}),e.jsx(x,{label:"Price ($)",type:"number",value:(t==null?void 0:t.price)||"",onChange:s=>n(a=>({...a,price:s.target.value})),className:"mb-3"}),e.jsx(le,{label:"Description",value:(t==null?void 0:t.description)||"",onChange:s=>n(a=>({...a,description:s.target.value})),className:"mb-3 descriptionpop",rows:4}),e.jsx(x,{label:"Upload Date",type:"date",value:((v=t==null?void 0:t.uploaded_at)==null?void 0:v.split("T")[0])||"",onChange:s=>n(a=>({...a,uploaded_at:s.target.value})),className:"mb-3"}),e.jsx(x,{label:"Media URL",value:(t==null?void 0:t.file_url)||"",onChange:s=>n(a=>({...a,file_url:s.target.value})),className:"mb-3"})]}),e.jsxs(w,{children:[e.jsx(u,{color:"secondary",onClick:()=>d(!1),children:"Cancel"}),e.jsx(u,{color:"primary",onClick:()=>{d(!1)},children:"Save Changes"})]})]}),e.jsxs(k,{alignment:"center",visible:_,onClose:()=>c(!1),"aria-labelledby":"DeletePickModalLabel",children:[e.jsx(D,{children:e.jsx(te,{id:"DeletePickModalLabel",children:"Delete Pick"})}),e.jsx(N,{children:e.jsxs("div",{children:[e.jsx("h4",{children:"Are you Sure?"}),e.jsx("p",{children:"You want to delete this pick."})]})}),e.jsxs(w,{children:[e.jsx(u,{color:"secondary",onClick:()=>c(!1),children:"Close"}),e.jsx(u,{color:"primary",onClick:A,children:"Delete"})]})]})]})};export{De as default};
