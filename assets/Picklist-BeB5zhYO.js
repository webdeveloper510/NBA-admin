import{r as i,h as _,j as e,C as w}from"./index-Dq11e3e3.js";/* empty css              */import{C as u}from"./index.esm-tdnZRy7B.js";import{g as S}from"./api-DI0OVYJv.js";import{C as k,a as E}from"./CCardBody-rF-oAZv2.js";import{C as M}from"./CCardHeader-DdHDYZ5I.js";import{C as P,a as B,b as j,c as t,d as F,e as l}from"./CTable-DsZ3UzDC.js";import{C as H}from"./CImage-DOExMsu2.js";import{c as L,a as R}from"./cil-trash-prAk5aip.js";import{C as U,a as V,b as A,c as $}from"./CModalHeader-wfOUkYis.js";import{C as d}from"./CFormInput-B1PBgUAu.js";import{C as O}from"./CFormTextarea-BlYRWONN.js";import{a as C}from"./CButton-JLDDGNh7.js";import"./DefaultLayout-DiDvqjQk.js";import"./CContainer-CfKTCl8j.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-6DKEODQC.js";import"./CFormControlValidation-DeDJJodH.js";import"./CFormLabel-BkeWZxIb.js";const ne=()=>{var h;const[p,f]=i.useState([]),[b,g]=i.useState(!0),[m,x]=i.useState(null),[v,c]=i.useState(!1),[r,o]=i.useState(null);_(),i.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("accessToken")||"",n=await S(a);n&&n.status===200?f(n.data):x("Unexpected data format")}catch(a){x("Error fetching data"),console.error(a)}finally{g(!1)}})()},[]);const y=s=>s?[".mp4",".avi",".mov",".wmv",".flv",".mkv"].some(n=>s.toLowerCase().endsWith(n)):!1,N=s=>s?new Date(s).toISOString().split("T")[0]:"",T=s=>{o(s),c(!0)},D=s=>{console.log("Delete item with ID:",s)};return e.jsxs(e.Fragment,{children:[e.jsxs(k,{className:"mb-4",children:[e.jsx(M,{className:"d-flex justify-content-between align-items-center",children:e.jsx("h3",{children:"Recent Added Pick"})}),e.jsx(E,{children:b?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(w,{color:"primary"}),e.jsx("p",{className:"mt-3",children:"Loading data..."})]}):m?e.jsx("div",{className:"text-danger text-center py-4",children:m}):p.length>0?e.jsxs(P,{hover:!0,striped:!0,responsive:!0,className:"table table-hover table-striped custom-table",children:[e.jsx(B,{children:e.jsxs(j,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Title"}),e.jsx(t,{children:"Price ($)"}),e.jsx(t,{children:"Duration"}),e.jsx(t,{children:"Description"}),e.jsx(t,{children:"Upload Date"}),e.jsx(t,{children:"Media"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(F,{children:p.map((s,a)=>e.jsxs(j,{children:[e.jsx(t,{children:a+1}),e.jsx(l,{children:s.title}),e.jsx(l,{children:s.price}),e.jsx(l,{children:s.time_duration}),e.jsx(l,{children:e.jsx("div",{className:"ellipsis",dangerouslySetInnerHTML:{__html:s.description}})}),e.jsx(l,{children:N(s.uploaded_at)}),e.jsx(l,{children:y(s.file_url)?e.jsxs("video",{width:"100",controls:!0,children:[e.jsx("source",{src:s.file_url,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx(H,{src:s.file_url,alt:s.media_file||"media",width:100,thumbnail:!0})}),e.jsxs(l,{children:[e.jsx(u,{icon:L,className:"me-2 text-primary",role:"button",onClick:()=>T(s)}),e.jsx(u,{icon:R,className:"text-danger",role:"button",onClick:()=>D(s.id)})]})]},s.id))})]}):e.jsx("div",{className:"text-center py-5",children:"No blog posts found"})})]}),e.jsxs(U,{visible:v,onClose:()=>c(!1),children:[e.jsx(V,{closeButton:!0,children:"Edit Pick"}),e.jsxs(A,{children:[e.jsx(d,{label:"Title",value:(r==null?void 0:r.title)||"",onChange:s=>o(a=>({...a,title:s.target.value})),className:"mb-3"}),e.jsx(d,{label:"Price ($)",type:"number",value:(r==null?void 0:r.price)||"",onChange:s=>o(a=>({...a,price:s.target.value})),className:"mb-3"}),e.jsx(O,{label:"Description",value:(r==null?void 0:r.description)||"",onChange:s=>o(a=>({...a,description:s.target.value})),className:"mb-3 descriptionpop",rows:4}),e.jsx(d,{label:"Upload Date",type:"date",value:((h=r==null?void 0:r.uploaded_at)==null?void 0:h.split("T")[0])||"",onChange:s=>o(a=>({...a,uploaded_at:s.target.value})),className:"mb-3"}),e.jsx(d,{label:"Media URL",value:(r==null?void 0:r.file_url)||"",onChange:s=>o(a=>({...a,file_url:s.target.value})),className:"mb-3"})]}),e.jsxs($,{children:[e.jsx(C,{color:"secondary",onClick:()=>c(!1),children:"Cancel"}),e.jsx(C,{color:"primary",onClick:()=>{c(!1)},children:"Save Changes"})]})]})]})};export{ne as default};
