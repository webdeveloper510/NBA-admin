import{r as g,h as C,j as e}from"./index-DuqvS91S.js";import{R as f}from"./index-C3viEOkY.js";import{c as b}from"./api-n1H7vtPA.js";import{C as F,a as B}from"./CCardBody-B_h6Wv9I.js";import{C as v}from"./CCardHeader-BgIgl8Lb.js";import{C as y}from"./CForm-BH7K7GqX.js";import{C as d,a as i}from"./CRow-EFe1iprF.js";import{C as l}from"./CFormLabel-CMWhEKah.js";import{C as c}from"./CFormInput-CYOGfRxp.js";import{C as D}from"./CFormSelect-8DZQz1yg.js";import{a as N}from"./CContainer-w3B1MxoP.js";import"./isEqual-D5IpyU6J.js";import"./DefaultLayout-BqC93kKY.js";import"./index.esm-MuKWKgsN.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-wcc7ojOc.js";import"./CFormControlValidation-B5dL-lC2.js";const V=()=>{const[a,n]=g.useState({title:"",images:[],imageFiles:[],description:"",date:"",sports_name:""}),[p,h]=g.useState({title:"",description:"",date:"",sports_name:""}),x=C(),m=r=>{const{name:t,value:s}=r.target;n({...a,[t]:s})},j=r=>{const t=r.target.files;if(t.length>0){const s=Array.from(t).map(o=>({url:URL.createObjectURL(o),filename:o.name,file:o}));n({...a,images:[...a.images,...s],imageFiles:[...a.imageFiles,...t]}),p.images&&h({...p,images:""})}},u=async r=>{r.preventDefault(),console.log("mediablogDatamediablogData",a);try{const t=new FormData;t.append("title",a.title),t.append("date",a.date),t.append("description",a.description),t.append("sports_name",a.sports_name),a.imageFiles.forEach(o=>{t.append("file",o)}),console.log("mediablogDatamediablogData",t);const s=await b(t);s&&s.status===201?(x("/list-blog"),n({title:"",price:"",description:"",images:[],imageFiles:[]}),setValidated(!1)):console.log("danger",`Error: ${(s==null?void 0:s.error)||"Failed to save media"}`)}catch(t){console.log("danger",`Error: ${t.message||"Unknown error"}`)}finally{}};return e.jsxs(F,{className:"",children:[e.jsx(v,{children:e.jsx("h3",{children:"Add New Blog"})}),e.jsx(B,{children:e.jsxs(y,{encType:"multipart/form-data",children:[e.jsxs(d,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"title",children:"Blog Title"}),e.jsx(c,{type:"text",name:"title",id:"title",value:a.title,onChange:m,required:!0})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(c,{type:"date",name:"date",id:"date",value:a.date,onChange:m,required:!0})]})]}),e.jsxs(d,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"sports_name",children:"Sport Name"}),e.jsxs(D,{name:"sports_name",id:"sports_name",value:a.sports_name,onChange:m,required:!0,children:[e.jsx("option",{value:"",children:"Select a sport"}),e.jsx("option",{value:"MLB",children:"MLB"}),e.jsx("option",{value:"NBA",children:"NBA"}),e.jsx("option",{value:"NHL",children:"NHL"})]})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"image",children:"Blog Image"}),e.jsx(c,{type:"file",name:"image",id:"image",accept:"image/*",onChange:j})]})]}),e.jsx(d,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(l,{htmlFor:"description",children:"Blog Description"}),e.jsx(f,{theme:"snow",value:a.description,onChange:r=>n({...a,description:r}),placeholder:"Write blog content here...",style:{height:"200px",marginBottom:"50px"}})]})}),e.jsx(N,{type:"button",onClick:r=>u(r),color:"primary",children:"Submit Blog"})]})})]})};export{V as default};
