import{r as m,h,j as e}from"./index-CqmNf2fW.js";import{x as u}from"./api-RJu03FDw.js";import{C as S,a as x}from"./CCardBody-C7FJ465i.js";import{C as b}from"./CCardHeader-DGJuISDD.js";import{C as g}from"./CAlert-Bw3bqQxz.js";import{C as y}from"./CForm-fvqFV9mB.js";import{C as c,a as d}from"./CRow-DgM48E3-.js";import{C as f}from"./CFormLabel-DCYeACLL.js";import{C as j}from"./CFormInput-DrPFFImt.js";import{C as _}from"./CFormTextarea-yYugqI1S.js";import{a as v}from"./CButton-udY_Gq0g.js";import"./CFormControlWrapper-BfxBiDx8.js";import"./CFormControlValidation-B_9BNbsd.js";const H=()=>{const[s,n]=m.useState({body_content:"",file:null}),[l,i]=m.useState({visible:!1,color:"",message:""});h();const r=(o,t)=>{i({visible:!0,color:o,message:t}),setTimeout(()=>i({visible:!1,color:"",message:""}),5e3)},C=o=>{const t=o.target.files[0];n({...s,file:t})},p=async o=>{if(o.preventDefault(),!s.file){r("danger","Please upload CSV file!");return}if(!s.body_content.trim()){r("danger","Please enter SMS content!");return}try{const t=new FormData;t.append("customer_data_file",s.file),t.append("body_content",s.body_content);const a=await u(t);a&&a.status===200?(r("success","SMS sent successfully!"),n({body_content:"",file:null})):r("danger",(a==null?void 0:a.message)||"Failed to send SMS")}catch(t){r("danger",t.message||"Something went wrong")}};return e.jsxs(S,{children:[e.jsx(b,{children:e.jsx("h3",{children:"Send SMS"})}),e.jsxs(x,{children:[l.visible&&e.jsx(g,{color:l.color,children:l.message}),e.jsxs(y,{encType:"multipart/form-data",children:[e.jsx(c,{className:"mb-3",children:e.jsxs(d,{md:6,children:[e.jsx(f,{htmlFor:"csv",children:"Upload CSV File"}),e.jsx(j,{type:"file",accept:".csv",id:"csv",onChange:C})]})}),e.jsx(c,{className:"mb-3",children:e.jsxs(d,{md:12,children:[e.jsx(f,{htmlFor:"body_content",children:"SMS Content"}),e.jsx(_,{rows:"5",name:"body_content",id:"body_content",placeholder:"Write your SMS message here...",value:s.body_content,onChange:o=>n({...s,body_content:o.target.value})})]})}),e.jsx(v,{color:"primary",onClick:p,children:"Send SMS"})]})]})]})};export{H as default};
