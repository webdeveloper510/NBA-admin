const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./login-CMvDY26O.css"])))=>i.map(i=>d[i]);
import{r as o,h as I,j as e,e as j}from"./index-Ds4S_sbO.js";import{C as u}from"./index.esm-i4la7etb.js";import{a as E,s as N}from"./api-y-LUXTga.js";import{C as S}from"./CContainer-Lscs1XIp.js";import{C as g,a as h}from"./CRow-BQTnAQM0.js";import{C as P}from"./CCardGroup-DtKCbTYH.js";import{C as k,a as A}from"./CCardBody-Ddudm3uc.js";import{C as R}from"./CForm-D2DIz5zb.js";import{C as T}from"./CAlert-YWxoFeGQ.js";import{C as x,a as C}from"./CInputGroupText-JrLiNHlW.js";import{c as D}from"./cil-user-Ddrdy7PS.js";import{C as f}from"./CFormInput-CUMCPmWH.js";import{c as F}from"./cil-lock-locked-DmxpJbVL.js";import{a as G}from"./CButton-DlQCzdPo.js";import"./CFormControlWrapper-CN6nmuZ4.js";import"./CFormControlValidation-Ch1Ex64z.js";import"./CFormLabel-DziRhtKV.js";j(()=>import("./bg_login-CRh7nNuu.js"),[],import.meta.url);j(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const re=()=>{const[n,v]=o.useState(""),[t,y]=o.useState(""),[l,i]=o.useState(""),[m,c]=o.useState(!1),[a,w]=o.useState({}),_=I(),b=()=>{const r={};return n.trim()||(r.email="Email is required"),t?t.length<6&&(r.password="Password must be at least 6 characters"):r.password="Password is required",w(r),Object.keys(r).length===0},L=async r=>{var d,p;if(r.preventDefault(),i(""),!!b()){c(!0);try{const s=await E({email:n,password:t});s.token?(N(s.token),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("username",s.username),localStorage.setItem("userId",s.user_id),_("/dashboard")):(p=(d=s.response)==null?void 0:d.data)!=null&&p.message?i(s.response.data.message):i("Login failed. Please check your credentials and try again.")}catch(s){i("An error occurred during login. Please try again."),console.error("Login error:",s)}finally{c(!1)}}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center bg_color_login",children:e.jsx(S,{children:e.jsx(g,{className:"justify-content-center",children:e.jsx(h,{md:6,children:e.jsx(P,{children:e.jsx(k,{className:"p-4",children:e.jsx(A,{children:e.jsxs(R,{onSubmit:L,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),l&&e.jsx(T,{color:"danger",children:l}),e.jsxs(x,{className:"mb-3",children:[e.jsx(C,{children:e.jsx(u,{icon:D})}),e.jsx(f,{placeholder:"email",autoComplete:"email",value:n,onChange:r=>v(r.target.value),invalid:!!a.email})]}),a.email&&e.jsx("div",{className:"text-danger mb-3 small",children:a.email}),e.jsxs(x,{className:"mb-4",children:[e.jsx(C,{children:e.jsx(u,{icon:F})}),e.jsx(f,{type:"password",placeholder:"Password",autoComplete:"current-password",value:t,onChange:r=>y(r.target.value),invalid:!!a.password})]}),a.password&&e.jsx("div",{className:"text-danger mb-3 small",children:a.password}),e.jsx(g,{children:e.jsx(h,{xs:6,children:e.jsx(G,{type:"submit",color:"primary",className:"px-4",disabled:m,children:m?"Logging in...":"Login"})})})]})})})})})})})})};export{re as default};
