import{r as c,h as b,j as e}from"./index-DpUBz1Bw.js";import{R as F}from"./index-CUasR2cr.js";import{c as B}from"./api-DqsSHhUP.js";import{C as y,a as N}from"./CCardBody-DZqTotfL.js";import{C as A}from"./CCardHeader-BMSJ96uK.js";import{C as _}from"./CAlert-akm0RBgz.js";import{C as S}from"./CForm-D0mlzxSW.js";import{C as p,a as i}from"./CRow-Cr8DzD6D.js";import{C as l}from"./CFormLabel-BE9SeOwX.js";import{C as g}from"./CFormInput-Bz4Fy2l4.js";import{C as w}from"./CFormSelect-D_gW8mtm.js";import{a as D}from"./CButton-DpMoyj-k.js";import"./isEqual-BQvyPqVK.js";import"./DefaultLayout-W0eQhKXY.js";import"./CContainer-CFg3_gcl.js";import"./index.esm-Dbi6wqYs.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-CerQkfsb.js";import"./CFormControlValidation-D6q-PwAV.js";const V=()=>{const[s,n]=c.useState({title:"",images:[],imageFiles:[],description:"",date:"",sports_name:""}),[h,x]=c.useState({title:"",description:"",date:"",sports_name:""}),[m,u]=c.useState({visible:!1,color:"",message:""}),j=b(),C=(r,t)=>{u({visible:!0,color:r,message:t}),setTimeout(()=>u({visible:!1,color:"",message:""}),5e3)},d=r=>{const{name:t,value:a}=r.target;n({...s,[t]:a})},f=r=>{const t=r.target.files;if(t.length>0){const a=Array.from(t).map(o=>({url:URL.createObjectURL(o),filename:o.name,file:o}));n({...s,images:[...s.images,...a],imageFiles:[...s.imageFiles,...t]}),h.images&&x({...h,images:""})}},v=async r=>{r.preventDefault();try{const t=new FormData;t.append("title",s.title),t.append("date",s.date),t.append("description",s.description),t.append("sports_name",s.sports_name),s.imageFiles.forEach(o=>{t.append("file",o)});const a=await B(t);a&&a.status===201?(C("success","Media saved successfully!"),j("/list-blog"),n({title:"",sports_name:"",description:"",images:[],imageFiles:[]})):console.log("danger",`Error: ${(a==null?void 0:a.error)||"Failed to save media"}`)}catch(t){console.log("danger",`Error: ${t.message||"Unknown error"}`)}finally{}};return e.jsxs(y,{className:"",children:[e.jsx(A,{children:e.jsx("h3",{children:"Add New Blog"})}),e.jsxs(N,{children:[m.visible&&e.jsx(_,{color:m.color,children:m.message}),e.jsxs(S,{encType:"multipart/form-data",children:[e.jsxs(p,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"title",children:"Blog Title"}),e.jsx(g,{type:"text",name:"title",id:"title",value:s.title,onChange:d,required:!0})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(g,{type:"date",name:"date",id:"date",value:s.date,onChange:d,required:!0})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"sports_name",children:"Sport Name"}),e.jsxs(w,{name:"sports_name",id:"sports_name",value:s.sports_name,onChange:d,required:!0,children:[e.jsx("option",{value:"",children:"Select a sport"}),e.jsx("option",{value:"MLB",children:"MLB"}),e.jsx("option",{value:"NBA",children:"NBA"}),e.jsx("option",{value:"NHL",children:"NHL"})]})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"image",children:"Blog Image"}),e.jsx(g,{type:"file",name:"image",id:"image",accept:"image/*",onChange:f})]})]}),e.jsx(p,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(l,{htmlFor:"description",children:"Blog Description"}),e.jsx(F,{theme:"snow",value:s.description,onChange:r=>n({...s,description:r}),placeholder:"Write blog content here...",style:{height:"200px",marginBottom:"50px"}})]})}),e.jsx(D,{type:"button",onClick:r=>v(r),color:"primary",children:"Submit Blog"})]})]})]})};export{V as default};
