import{r as i,j as s}from"./index-X8N2_xbW.js";/* empty css                 */import{C as S}from"./index.esm-CUCfqwFk.js";import{t as O,v as $,w as q}from"./api-D5ENb5m_.js";import{C as W,a as Y}from"./CCardBody-BRXcraVw.js";import{C as z}from"./CCardHeader-BocOilOO.js";import{C as E}from"./CAlert-rNZx4VSy.js";import{C as G,a as J,b as N,c as n,d as K,e as c}from"./CTable-BeMNOcpX.js";import{C as Q}from"./CImage-PNQ5tVRA.js";import{c as X,a as Z}from"./cil-trash-prAk5aip.js";import{C as T,a as L,b as P}from"./CModalHeader-BXfWhk_6.js";import{C as u}from"./CFormInput-CmloOF11.js";import{C as k}from"./CFormLabel-Cj9i2zVz.js";import{C as ee}from"./CFormSelect-lO4XVsyz.js";import{C as se}from"./CFormTextarea-DfctJwWI.js";import{C as w}from"./CModalFooter-B8YreNiz.js";import{a as g}from"./CButton-BQQ_XzMg.js";import{C as le}from"./CModalTitle-BLWXQV7N.js";import"./DefaultLayout-B_eFmCjx.js";import"./CContainer-Bmu7i1tt.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-DsfFr6uy.js";import"./CFormControlValidation-BzcG-KMm.js";const Se=()=>{const[a,b]=i.useState([]);console.log("ðŸš€ ~ ListFreePicks ~ freePicks:",a);const[M,m]=i.useState(!1),[A,F]=i.useState(null),[l,p]=i.useState({id:"",title:"",images:[],imageFiles:[],description:"",date:"",sports_name:""}),[v,B]=i.useState({title:"",description:"",date:"",sports_name:""}),_=A||(l==null?void 0:l.imageFiles),[j,y]=i.useState({visible:!1,color:"",message:""}),[D,d]=i.useState(!1);i.useEffect(()=>{f()},[]);const C=(e,r)=>{y({visible:!0,color:e,message:r}),setTimeout(()=>y({visible:!1,color:"",message:""}),5e3)},f=()=>{O().then(e=>{console.log("ðŸš€ ~ .then ~ res:",e),e.status==200?b(e.data):b([])}).catch(e=>{console.log(e)})},I=e=>{d(e)},H=()=>{q(D).then(e=>{console.log("ðŸš€ ~ .then ~ res:",e),e.status==204?(f(),d(!1),C("success",e==null?void 0:e.message)):(d(!1),C("danger",e==null?void 0:e.message))}).catch(e=>{console.log("error",e)})},R=e=>{p({id:e==null?void 0:e.id,title:e==null?void 0:e.title,images:[{url:e==null?void 0:e.file_url}],imageFiles:[],description:e==null?void 0:e.description,date:e==null?void 0:e.created_at,sports_name:e==null?void 0:e.sports_type}),F(e==null?void 0:e.file_url),m(!0)},x=e=>{const{name:r,value:o}=e.target;p({...l,[r]:o})},U=e=>{const r=e.target.files,o=e.target.files[0];if(o){const t=URL.createObjectURL(o);F(t)}if(r.length>0){const t=Array.from(r).map(h=>({url:URL.createObjectURL(h),filename:h.name,file:h}));p({...l,images:[...l.images,...t],imageFiles:[...l.imageFiles,...r]}),v.images&&B({...v,images:""})}},V=async e=>{e.preventDefault();try{const r=l.id,o=new FormData;o.append("title",l.title),o.append("date",l.date),o.append("description",l.description),o.append("sports_name",l.sports_name),l.imageFiles.forEach(h=>{o.append("file",h)});const t=await $(r,o);t&&t.status===200?(C("success","Free Pick updated successfully!"),m(!1),f(),p({title:"",sports_name:"",description:"",images:[],imageFiles:[]})):(console.log("danger",`Error: ${(t==null?void 0:t.error)||"Failed to save free pick"}`),m(!1))}catch(r){console.log("danger",`Error: ${r.message||"Unknown error"}`)}};return s.jsxs(s.Fragment,{children:[s.jsxs(W,{className:"",children:[s.jsx(z,{children:s.jsx("h3",{children:"Free Picks List"})}),s.jsxs(Y,{children:[j.visible&&s.jsx(E,{color:j.color,children:j.message}),s.jsxs(G,{striped:!0,hover:!0,responsive:!0,className:"custom-table",children:[s.jsx(J,{children:s.jsxs(N,{children:[s.jsx(n,{children:"#"}),s.jsx(n,{children:"Title"}),s.jsx(n,{children:"Sport Type"}),s.jsx(n,{children:"Date"}),s.jsx(n,{children:"Image"}),s.jsx(n,{children:"Description"}),s.jsx(n,{children:"Actions"})]})}),s.jsx(K,{children:(a==null?void 0:a.length)>0?a==null?void 0:a.map((e,r)=>{var o;return s.jsxs(N,{children:[s.jsx(c,{children:r+1}),s.jsx(c,{title:e.title,children:(o=e==null?void 0:e.title)==null?void 0:o.slice(0,30)}),s.jsx(c,{children:e.sports_type}),s.jsx(c,{children:e.created_at}),s.jsx(c,{children:s.jsx(Q,{src:e==null?void 0:e.file_url,alt:(e==null?void 0:e.media_file)||"media",width:100,thumbnail:!0})}),s.jsx(c,{children:s.jsx("div",{dangerouslySetInnerHTML:{__html:e.description},className:"ellipsis single-line",title:e.description})}),s.jsxs(c,{children:[s.jsx(S,{icon:X,className:"me-2 text-primary",role:"button",onClick:()=>R(e)}),s.jsx(S,{icon:Z,className:"text-danger",role:"button",onClick:()=>I(e==null?void 0:e.id)})]})]},r)}):s.jsx(s.Fragment,{})})]})]})]}),s.jsxs(T,{visible:M,onClose:()=>m(!1),children:[s.jsx(L,{children:"Edit Free Pick"}),s.jsxs(P,{children:[s.jsx(u,{label:"Title",name:"title",value:(l==null?void 0:l.title)||"",onChange:x,className:"mb-3"}),s.jsx(k,{htmlFor:"sports_name",children:"Sport Name"}),s.jsxs(ee,{name:"sports_name",id:"sports_name",value:l==null?void 0:l.sports_name,onChange:x,required:!0,className:"mb-3",children:[s.jsx("option",{value:"",children:l!=null&&l.sports_name?l==null?void 0:l.sports_name:"Select a sport"}),s.jsx("option",{value:"MLB",children:"MLB"}),s.jsx("option",{value:"NBA",children:"NBA"}),s.jsx("option",{value:"NHL",children:"NHL"})]}),s.jsx(u,{label:"Date",type:"date",name:"date",value:(l==null?void 0:l.date)||"",onChange:x,className:"mb-3"}),_&&s.jsx("div",{className:"mb-3",children:s.jsx("img",{src:_,alt:"Current",style:{maxWidth:"200px",borderRadius:"8px"}})}),s.jsx(u,{type:"file",accept:"image/*",name:"image",id:"image",className:"mb-3",onChange:U}),s.jsx(se,{label:"Description",rows:"4",name:"description",value:(l==null?void 0:l.description)||"",onChange:x})]}),s.jsxs(w,{children:[s.jsx(g,{color:"secondary",onClick:()=>m(!1),children:"Cancel"}),s.jsx(g,{color:"primary",onClick:V,children:"Save Changes"})]})]}),s.jsxs(T,{alignment:"center",visible:D,onClose:()=>d(!1),children:[s.jsx(L,{children:s.jsx(le,{children:"Delete Free Pick"})}),s.jsx(P,{children:s.jsxs("div",{children:[s.jsx("h4",{children:"Are you sure?"}),s.jsx("p",{children:"You want to delete this free pick."})]})}),s.jsxs(w,{children:[s.jsx(g,{color:"secondary",onClick:()=>d(!1),children:"Close"}),s.jsx(g,{color:"primary",onClick:()=>H(),children:"Delete"})]})]})]})};export{Se as default};
