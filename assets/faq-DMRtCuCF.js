import{R as p,r as c,j as t,C as U}from"./index--Uiof7QR.js";import{m as G,n as K,o as J,p as X}from"./api-Ciw8P93p.js";import{C as Y,a as Z}from"./CCardBody-BBLEt530.js";import{C as $}from"./CCardHeader-l4cp_REd.js";import{C as A,a as y}from"./CRow-8WOOlt4S.js";import{a as h}from"./CButton-CrV7DbHN.js";import{C as ee}from"./CAlert-C-QjHs4I.js";import{C as te}from"./CForm-CeDiNoa-.js";import{C as N}from"./CFormLabel-BX1mQ45a.js";import{C as Q}from"./CFormInput-ds3yfq9s.js";import{C as re,a as se,b as ne}from"./CModalHeader-D58j4prj.js";import{C as ae}from"./CModalFooter-DeFpaeDn.js";import"./CFormControlWrapper-Df7ULOaU.js";import"./CFormControlValidation-BxC6nkYL.js";import"./DefaultLayout-CBUpw1h5.js";import"./CContainer-DlJ1Uple.js";import"./index.esm-DHJlcZyd.js";import"./cil-lock-locked-DmxpJbVL.js";var _={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},D=p.createContext&&p.createContext(_),oe=["attr","size","title"];function ie(e,s){if(e==null)return{};var r=le(e,s),a,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)a=d[o],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function le(e,s){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(s.indexOf(a)>=0)continue;r[a]=e[a]}return r}function w(){return w=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},w.apply(this,arguments)}function M(e,s){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);s&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,a)}return r}function F(e){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?M(Object(r),!0).forEach(function(a){ce(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ce(e,s,r){return s=de(s),s in e?Object.defineProperty(e,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[s]=r,e}function de(e){var s=ue(e,"string");return typeof s=="symbol"?s:s+""}function ue(e,s){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function z(e){return e&&e.map((s,r)=>p.createElement(s.tag,F({key:r},s.attr),z(s.child)))}function me(e){return s=>p.createElement(fe,w({attr:F({},e.attr)},s),z(e.child))}function fe(e){var s=r=>{var{attr:a,size:o,title:d}=e,j=ie(e,oe),g=o||r.size||"1em",m;return r.className&&(m=r.className),e.className&&(m=(m?m+" ":"")+e.className),p.createElement("svg",w({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,j,{className:m,style:F(F({color:e.color||r.color},r.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),d&&p.createElement("title",null,d),e.children)};return D!==void 0?p.createElement(D.Consumer,null,r=>s(r)):s(_)}function he(e){return me({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}const De=()=>{const[e,s]=c.useState([]),[r,a]=c.useState([{question:"",answer:""}]),[o,d]=c.useState(null),[j,g]=c.useState({visible:!1,color:"",message:""}),[m,I]=c.useState([]),[L,q]=c.useState(!1),[O,b]=c.useState(!0),[B,C]=c.useState(!1),[x,P]=c.useState(null),f=(n,i)=>{g({visible:!0,color:n,message:i}),setTimeout(()=>g({visible:!1,color:"",message:""}),3e3)},v=async()=>{q(!0);const n=await G();(n==null?void 0:n.status)===200?I(n.data):f("danger",(n==null?void 0:n.message)||"Failed to fetch FAQs"),q(!1)},V=()=>{a([...r,{question:"",answer:""}])},S=(n,i,l)=>{const u=[...r];u[n][i]=l,a(u)},H=async n=>{n.preventDefault();const i=r.filter(E=>E.question&&E.answer);if(i.length===0)return f("danger","Please fill at least one valid question-answer pair");const u=await J({json_data:i});(u==null?void 0:u.status)===200?(f("success","FAQs added successfully"),a([{question:"",answer:""}]),v(),b(!1)):f("danger",(u==null?void 0:u.message)||"Error submitting FAQs")},R=n=>{a([{question:n.question,answer:n.answer}]),d(n.id),b(!0),window.scrollTo({top:0,behavior:"smooth"})},T=async n=>{n.preventDefault();const i=r[0],l=await K(o,i);(l==null?void 0:l.status)===200?(f("success","FAQ updated successfully"),a([{question:"",answer:""}]),d(null),v(),b(!1)):f("danger",(l==null?void 0:l.message)||"Failed to update")},k=n=>{P(n),C(!0)},W=async()=>{if(x){const n=await X(x.id);(n==null?void 0:n.status)===204?(f("success","FAQ deleted"),v()):f("danger",(n==null?void 0:n.message)||"Delete failed"),C(!1),P(null)}};return c.useEffect(()=>{v()},[]),t.jsxs(t.Fragment,{children:[t.jsxs(Y,{children:[t.jsx($,{children:t.jsxs(A,{className:"align-items-center",children:[t.jsx(y,{children:t.jsx("h4",{children:o?"Edit FAQ":"Manage FAQs"})}),t.jsx(y,{className:"text-end",children:O?t.jsx(h,{color:"success",onClick:()=>{b(!1),v()},children:"View FAQs"}):t.jsx(h,{color:"primary",onClick:()=>{b(!0),d(null),a([{question:"",answer:""}])},children:"Add FAQ"})})]})}),t.jsxs(Z,{children:[j.visible&&t.jsx(ee,{color:j.color,children:j.message}),O&&t.jsxs(te,{onSubmit:o?T:H,children:[r.map((n,i)=>t.jsxs("div",{className:"mb-3 border p-3 rounded",children:[t.jsx(A,{children:t.jsxs(y,{md:12,children:[t.jsx(N,{children:"Question"}),t.jsx(Q,{type:"text",value:n.question,onChange:l=>S(i,"question",l.target.value),required:!0})]})}),t.jsx(A,{className:"mt-2",children:t.jsxs(y,{md:12,children:[t.jsx(N,{children:"Answer"}),t.jsx(Q,{type:"text",value:n.answer,onChange:l=>S(i,"answer",l.target.value),required:!0})]})})]},i)),!o&&t.jsxs(h,{color:"secondary",onClick:V,className:"mb-3",children:[t.jsx(he,{})," Add More"]}),t.jsx("div",{children:t.jsx(h,{type:"submit",color:o?"warning":"primary",children:o?"Update FAQ":"Submit FAQs"})})]}),!O&&t.jsx(t.Fragment,{children:L?t.jsx(U,{}):m.length===0?t.jsx("p",{children:"No FAQs available."}):t.jsx("ul",{className:"mt-3",children:m.map((n,i)=>t.jsxs("li",{className:"mb-3 border p-2 rounded",children:[t.jsxs("strong",{children:["Q",i+1,": ",n.question]}),t.jsx("br",{}),"A: ",n.answer,t.jsx("br",{}),t.jsx(h,{color:"info",size:"sm",className:"me-2 mt-1",onClick:()=>R(n),children:"Edit"}),t.jsx(h,{color:"danger",size:"sm",className:"mt-1",onClick:()=>k(n),children:"Delete"})]},n.id))})})]})]}),t.jsxs(re,{visible:B,onClose:()=>C(!1),children:[t.jsx(se,{closeButton:!0,children:"Confirm Delete"}),t.jsxs(ne,{children:["Are you sure you want to delete the FAQ: ",t.jsx("strong",{children:x==null?void 0:x.question}),"?"]}),t.jsxs(ae,{children:[t.jsx(h,{color:"secondary",onClick:()=>C(!1),children:"Cancel"}),t.jsx(h,{color:"danger",onClick:W,children:"Delete"})]})]})]})};export{De as default};
