import{r as o,h as N,j as e}from"./index-DmIDuIAH.js";import{C as u}from"./index.esm-mJefLrEN.js";import{a as S,s as k}from"./api-DHK8CfzK.js";import{b as E,a as I}from"./CContainer-CDo_UJZM.js";import{C as h,a as x}from"./CRow-Do2Xm22G.js";import{C as P}from"./CCardGroup-CcQ0Haeq.js";import{C as A,a as F}from"./CCardBody-CGHHEQX3.js";import{C as G}from"./CForm-C_-vS1Cy.js";import{C as q}from"./CAlert-BZlXIa5d.js";import{C as g,a as C}from"./CInputGroupText-Dqp3DBE5.js";import{c as B}from"./cil-user-Ddrdy7PS.js";import{C as f}from"./CFormInput-CSuSEkV9.js";import{c as R}from"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-COjPlEaF.js";import"./CFormControlValidation-B0o-OTtV.js";import"./CFormLabel-akASq4i3.js";const $=()=>{const[n,j]=o.useState(""),[t,y]=o.useState(""),[l,i]=o.useState(""),[c,d]=o.useState(!1),[r,v]=o.useState({}),w=N(),b=()=>{const s={};return n.trim()||(s.email="Email is required"),t?t.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",v(s),Object.keys(s).length===0},L=async s=>{var m,p;if(s.preventDefault(),i(""),!!b()){d(!0);try{const a=await S({email:n,password:t});a.token?(k(a.token.access),localStorage.setItem("isAuthenticated","true"),w("/dashboard")):(p=(m=a.response)==null?void 0:m.data)!=null&&p.message?i(a.response.data.message):i("Login failed. Please check your credentials and try again.")}catch(a){i("An error occurred during login. Please try again."),console.error("Login error:",a)}finally{d(!1)}}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(E,{children:e.jsx(h,{className:"justify-content-center",children:e.jsx(x,{md:6,children:e.jsx(P,{children:e.jsx(A,{className:"p-4",children:e.jsx(F,{children:e.jsxs(G,{onSubmit:L,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),l&&e.jsx(q,{color:"danger",children:l}),e.jsxs(g,{className:"mb-3",children:[e.jsx(C,{children:e.jsx(u,{icon:B})}),e.jsx(f,{placeholder:"email",autoComplete:"email",value:n,onChange:s=>j(s.target.value),invalid:!!r.email})]}),r.email&&e.jsx("div",{className:"text-danger mb-3 small",children:r.email}),e.jsxs(g,{className:"mb-4",children:[e.jsx(C,{children:e.jsx(u,{icon:R})}),e.jsx(f,{type:"password",placeholder:"Password",autoComplete:"current-password",value:t,onChange:s=>y(s.target.value),invalid:!!r.password})]}),r.password&&e.jsx("div",{className:"text-danger mb-3 small",children:r.password}),e.jsx(h,{children:e.jsx(x,{xs:6,children:e.jsx(I,{type:"submit",color:"primary",className:"px-4",disabled:c,children:c?"Logging in...":"Login"})})})]})})})})})})})})};export{$ as default};
