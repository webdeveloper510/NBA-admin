import{r as c,h as F,j as e}from"./index-B_lKNYVa.js";import{R as A}from"./index-D5j4WJDR.js";/* empty css                */import{c as B}from"./api-j3oAJv8g.js";import{C as N,a as b}from"./CCardBody-DeqAvIAf.js";import{C as y}from"./CCardHeader-O1UK2VQ0.js";import{C as L}from"./CAlert-DV5qCBHt.js";import{C as S}from"./CForm-CSfwArOS.js";import{C as p,a as i}from"./CRow-D4InKCbA.js";import{C as l}from"./CFormLabel-DcXa0cJJ.js";import{C as h}from"./CFormInput-B5nEyWpX.js";import{C as _}from"./CFormSelect-C3Pye0rH.js";import{a as w}from"./CButton-Bvv0pbhm.js";import"./isEqual-CTKBdgd9.js";import"./DefaultLayout-BiYCz6WX.js";import"./CContainer-1gVGhtYb.js";import"./index.esm-CBSIDQ9a.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-DEhgsfZH.js";import"./CFormControlValidation-DzSOprKh.js";const X=()=>{const[s,n]=c.useState({title:"",images:[],imageFiles:[],description:"",date:"",sports_name:""}),[g,x]=c.useState({title:"",description:"",date:"",sports_name:""}),[m,u]=c.useState({visible:!1,color:"",message:""}),j=F(),C=(r,t)=>{u({visible:!0,color:r,message:t}),setTimeout(()=>u({visible:!1,color:"",message:""}),5e3)},d=r=>{const{name:t,value:a}=r.target;n({...s,[t]:a})},f=r=>{const t=r.target.files;if(t.length>0){const a=Array.from(t).map(o=>({url:URL.createObjectURL(o),filename:o.name,file:o}));n({...s,images:[...s.images,...a],imageFiles:[...s.imageFiles,...t]}),g.images&&x({...g,images:""})}},v=async r=>{r.preventDefault();try{const t=new FormData;t.append("title",s.title),t.append("date",s.date),t.append("description",s.description),t.append("sports_name",s.sports_name),s.imageFiles.forEach(o=>{t.append("file",o)});const a=await B(t);a&&a.status===201?(C("success","Media saved successfully!"),j("/list-blog"),n({title:"",sports_name:"",description:"",images:[],imageFiles:[]})):console.log("danger",`Error: ${(a==null?void 0:a.error)||"Failed to save media"}`)}catch(t){console.log("danger",`Error: ${t.message||"Unknown error"}`)}finally{}};return e.jsxs(N,{className:"",children:[e.jsx(y,{children:e.jsx("h3",{children:"Add New Blog"})}),e.jsxs(b,{children:[m.visible&&e.jsx(L,{color:m.color,children:m.message}),e.jsxs(S,{encType:"multipart/form-data",children:[e.jsxs(p,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"title",children:"Blog Title"}),e.jsx(h,{type:"text",name:"title",id:"title",value:s.title,onChange:d,required:!0})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(h,{type:"date",name:"date",id:"date",value:s.date,onChange:d,required:!0})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"sports_name",children:"Sport Name"}),e.jsxs(_,{name:"sports_name",id:"sports_name",value:s.sports_name,onChange:d,required:!0,children:[e.jsx("option",{value:"",children:"Select a sport"}),e.jsx("option",{value:"MLB",children:"MLB"}),e.jsx("option",{value:"NBA",children:"NBA"}),e.jsx("option",{value:"NHL",children:"NHL"}),e.jsx("option",{value:"NCAAF",children:"NCAAF"}),e.jsx("option",{value:"CFB",children:"CFB"}),e.jsx("option",{value:"NFL",children:"NFL"}),e.jsx("option",{value:"NCAAB",children:"NCAAB"}),e.jsx("option",{value:"ALL_SPORTS",children:"All sports"})]})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"image",children:"Blog Image"}),e.jsx(h,{type:"file",name:"image",id:"image",accept:"image/*",onChange:f})]})]}),e.jsx(p,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(l,{htmlFor:"description",children:"Blog Description"}),e.jsx(A,{theme:"snow",value:s.description,onChange:r=>n({...s,description:r}),placeholder:"Write blog content here...",style:{height:"200px",marginBottom:"50px"}})]})}),e.jsx(w,{type:"button",onClick:r=>v(r),color:"primary",children:"Submit Blog"})]})]})]})};export{X as default};
