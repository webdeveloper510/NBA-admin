import{r as c,h as b,j as e}from"./index-ceYUE2lg.js";import{R as F}from"./index-i2A94dyZ.js";import{c as B}from"./api-Bj3sD_V7.js";import{C as y,a as N}from"./CCardBody-B3wk5VGO.js";import{C as A}from"./CCardHeader-Bt-TiqJ1.js";import{C as _}from"./CAlert-Bduz0RYB.js";import{C as S}from"./CForm-HV4EeTcI.js";import{C as p,a as i}from"./CRow-8EIfvUjJ.js";import{C as l}from"./CFormLabel-COmzxBw2.js";import{C as g}from"./CFormInput-DD74c6sY.js";import{C as w}from"./CFormSelect-9KcDW50R.js";import{a as D}from"./CContainer-BfNIDCwl.js";import"./isEqual-BRuN97ls.js";import"./DefaultLayout-CM6Ku-CA.js";import"./index.esm-D31th84k.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-EGmyGbE8.js";import"./CFormControlValidation-ByzU-ann.js";const P=()=>{const[s,n]=c.useState({title:"",images:[],imageFiles:[],description:"",date:"",sports_name:""}),[h,x]=c.useState({title:"",description:"",date:"",sports_name:""}),[m,u]=c.useState({visible:!1,color:"",message:""}),j=b(),C=(a,t)=>{u({visible:!0,color:a,message:t}),setTimeout(()=>u({visible:!1,color:"",message:""}),5e3)},d=a=>{const{name:t,value:r}=a.target;n({...s,[t]:r})},f=a=>{const t=a.target.files;if(t.length>0){const r=Array.from(t).map(o=>({url:URL.createObjectURL(o),filename:o.name,file:o}));n({...s,images:[...s.images,...r],imageFiles:[...s.imageFiles,...t]}),h.images&&x({...h,images:""})}},v=async a=>{a.preventDefault();try{const t=new FormData;t.append("title",s.title),t.append("date",s.date),t.append("description",s.description),t.append("sports_name",s.sports_name),s.imageFiles.forEach(o=>{t.append("file",o)});const r=await B(t);r&&r.status===201?(C("success","Media saved successfully!"),j("/list-blog"),n({title:"",sports_name:"",description:"",images:[],imageFiles:[]})):console.log("danger",`Error: ${(r==null?void 0:r.error)||"Failed to save media"}`)}catch(t){console.log("danger",`Error: ${t.message||"Unknown error"}`)}finally{}};return e.jsxs(y,{className:"",children:[e.jsx(A,{children:e.jsx("h3",{children:"Add New Blog"})}),e.jsxs(N,{children:[m.visible&&e.jsx(_,{color:m.color,children:m.message}),e.jsxs(S,{encType:"multipart/form-data",children:[e.jsxs(p,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"title",children:"Blog Title"}),e.jsx(g,{type:"text",name:"title",id:"title",value:s.title,onChange:d,required:!0})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(g,{type:"date",name:"date",id:"date",value:s.date,onChange:d,required:!0})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"sports_name",children:"Sport Name"}),e.jsxs(w,{name:"sports_name",id:"sports_name",value:s.sports_name,onChange:d,required:!0,children:[e.jsx("option",{value:"",children:"Select a sport"}),e.jsx("option",{value:"MLB",children:"MLB"}),e.jsx("option",{value:"NBA",children:"NBA"}),e.jsx("option",{value:"NHL",children:"NHL"})]})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"image",children:"Blog Image"}),e.jsx(g,{type:"file",name:"image",id:"image",accept:"image/*",onChange:f})]})]}),e.jsx(p,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(l,{htmlFor:"description",children:"Blog Description"}),e.jsx(F,{theme:"snow",value:s.description,onChange:a=>n({...s,description:a}),placeholder:"Write blog content here...",style:{height:"200px",marginBottom:"50px"}})]})}),e.jsx(D,{type:"button",onClick:a=>v(a),color:"primary",children:"Submit Blog"})]})]})]})};export{P as default};
