import{r as i,h as f,j as e,C}from"./index-DknxvMTE.js";import{g}from"./api-B4feELX9.js";import{C as v,a as b}from"./CCardBody-DE43ITNL.js";import{C as y}from"./CCardHeader-CHTVCgvk.js";import{a as N}from"./CContainer-C_J6kvdg.js";import{C as T,a as w,b as d,c as t,d as D,e as o}from"./CTable-CbnggdS_.js";import{C as k}from"./CImage-qAIfTPJo.js";const L=()=>{const[n,x]=i.useState([]),[h,m]=i.useState(!0),[l,c]=i.useState(null),p=f();i.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("accessToken")||"",a=await g(r);a&&a.status===200?x(a.data):c("Unexpected data format")}catch(r){c("Error fetching data"),console.error(r)}finally{m(!1)}})()},[]);const j=s=>s?[".mp4",".avi",".mov",".wmv",".flv",".mkv"].some(a=>s.toLowerCase().endsWith(a)):!1,u=s=>s?new Date(s).toISOString().split("T")[0]:"";return e.jsx(e.Fragment,{children:e.jsxs(v,{className:"mb-4",children:[e.jsxs(y,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("strong",{children:"Recent Blog Picks"}),e.jsx(N,{color:"primary",size:"sm",onClick:()=>p("/add-picks"),children:"+ Add Picks"})]}),e.jsx(b,{children:h?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(C,{color:"primary"}),e.jsx("p",{className:"mt-3",children:"Loading data..."})]}):l?e.jsx("div",{className:"text-danger text-center py-4",children:l}):n.length>0?e.jsxs(T,{striped:!0,hover:!0,responsive:!0,className:"custom-table",children:[e.jsx(w,{children:e.jsxs(d,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Title"}),e.jsx(t,{children:"Price ($)"}),e.jsx(t,{children:"Description"}),e.jsx(t,{children:"Upload Date"}),e.jsx(t,{children:"Media"})]})}),e.jsx(D,{children:n.map((s,r)=>e.jsxs(d,{children:[e.jsx(t,{children:r+1}),e.jsx(o,{children:s.title}),e.jsx(o,{children:s.price}),e.jsx(o,{children:e.jsx("div",{className:"ellipsis",title:s.description,children:s.description})}),e.jsx(o,{children:u(s.uploaded_at)}),e.jsx(o,{children:j(s.file_url)?e.jsxs("video",{width:"100",controls:!0,children:[e.jsx("source",{src:s.file_url,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx(k,{src:s.file_url,alt:s.media_file||"media",width:100,thumbnail:!0})})]},s.id))})]}):e.jsx("div",{className:"text-center py-5",children:"No blog posts found"})})]})})};export{L as default};
