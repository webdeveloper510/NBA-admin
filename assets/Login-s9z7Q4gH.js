import{r as o,h as N,j as e}from"./index-DknxvMTE.js";import{C as u}from"./index.esm-B6g9dpiq.js";import{a as S,s as I}from"./api-B4feELX9.js";import{b as k,a as E}from"./CContainer-C_J6kvdg.js";import{C as h,a as x}from"./CRow-CdQPeIiV.js";import{C as P}from"./CCardGroup-DAddb2gn.js";import{C as A,a as F}from"./CCardBody-DE43ITNL.js";import{C as G}from"./CForm-DIvNSYEC.js";import{C as q}from"./CAlert-kEd-hEsG.js";import{C as g,a as C}from"./CInputGroupText-DxWlwOzK.js";import{c as B}from"./cil-user-Ddrdy7PS.js";import{C as f}from"./CFormInput-pVSYLVc3.js";import{c as R}from"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-DSLQ_X7y.js";import"./CFormControlValidation-B0PQQeR_.js";import"./CFormLabel--tzb7ppE.js";const $=()=>{const[n,j]=o.useState(""),[t,y]=o.useState(""),[l,i]=o.useState(""),[c,d]=o.useState(!1),[a,v]=o.useState({}),w=N(),b=()=>{const s={};return n.trim()||(s.email="Email is required"),t?t.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",v(s),Object.keys(s).length===0},L=async s=>{var m,p;if(s.preventDefault(),i(""),!!b()){d(!0);try{const r=await S({email:n,password:t});r.token?(I(r.token.access),localStorage.setItem("isAuthenticated","true"),localStorage.setItem("username",r.username),w("/dashboard")):(p=(m=r.response)==null?void 0:m.data)!=null&&p.message?i(r.response.data.message):i("Login failed. Please check your credentials and try again.")}catch(r){i("An error occurred during login. Please try again."),console.error("Login error:",r)}finally{d(!1)}}};return e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(k,{children:e.jsx(h,{className:"justify-content-center",children:e.jsx(x,{md:6,children:e.jsx(P,{children:e.jsx(A,{className:"p-4",children:e.jsx(F,{children:e.jsxs(G,{onSubmit:L,children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),l&&e.jsx(q,{color:"danger",children:l}),e.jsxs(g,{className:"mb-3",children:[e.jsx(C,{children:e.jsx(u,{icon:B})}),e.jsx(f,{placeholder:"email",autoComplete:"email",value:n,onChange:s=>j(s.target.value),invalid:!!a.email})]}),a.email&&e.jsx("div",{className:"text-danger mb-3 small",children:a.email}),e.jsxs(g,{className:"mb-4",children:[e.jsx(C,{children:e.jsx(u,{icon:R})}),e.jsx(f,{type:"password",placeholder:"Password",autoComplete:"current-password",value:t,onChange:s=>y(s.target.value),invalid:!!a.password})]}),a.password&&e.jsx("div",{className:"text-danger mb-3 small",children:a.password}),e.jsx(h,{children:e.jsx(x,{xs:6,children:e.jsx(E,{type:"submit",color:"primary",className:"px-4",disabled:c,children:c?"Logging in...":"Login"})})})]})})})})})})})})};export{$ as default};
