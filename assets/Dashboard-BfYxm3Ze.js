import{r as i,j as e,C}from"./index-DmIDuIAH.js";import"./WidgetsDropdown-CNPn6weN.js";import{g}from"./api-DHK8CfzK.js";import{C as n,a as l}from"./CCardBody-CGHHEQX3.js";import{C as b}from"./CCardHeader-ChVgiIc2.js";import{C as v,a as y,b as h,c as t,d as T,e as o}from"./CTable-43kxi5uC.js";import{C as N}from"./CImage-DbGgyxTG.js";import"./index.esm-GAF-WZKs.js";import"./index.esm-mJefLrEN.js";import"./CRow-Do2Xm22G.js";import"./DefaultLayout-Xciukx7f.js";import"./CContainer-CDo_UJZM.js";import"./cil-lock-locked-DmxpJbVL.js";import"./cil-options-lEuTZ2lu.js";const $=()=>{const[c,p]=i.useState([]),[m,j]=i.useState(!0),[d,x]=i.useState(null);i.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("accessToken")||"",a=await g(r);a&&a.status==200?p(a.data):x("Unexpected data format")}catch(r){x("Error fetching data"),console.error(r)}finally{j(!1)}})()},[]);const u=s=>s?[".mp4",".avi",".mov",".wmv",".flv",".mkv"].some(a=>s.toLowerCase().endsWith(a)):!1,f=s=>s?new Date(s).toISOString().split("T")[0]:"";return m?e.jsx(n,{className:"mb-4",children:e.jsxs(l,{className:"text-center py-5",children:[e.jsx(C,{color:"primary"}),e.jsx("p",{className:"mt-3",children:"Loading data..."})]})}):d?e.jsx(n,{className:"mb-4",children:e.jsx(l,{className:"text-center py-5",children:e.jsxs("div",{className:"text-danger",children:["Error: ",d]})})}):e.jsx(e.Fragment,{children:e.jsxs(n,{className:"mb-4",children:[e.jsx(b,{children:e.jsx("strong",{children:"Recent Blog Picks"})}),e.jsx(l,{children:c.length>0?e.jsxs(v,{striped:!0,hover:!0,responsive:!0,children:[e.jsx(y,{children:e.jsxs(h,{children:[e.jsx(t,{children:"#"}),e.jsx(t,{children:"Title"}),e.jsx(t,{children:"Price ($)"}),e.jsx(t,{children:"Description"}),e.jsx(t,{children:"Upload Date"}),e.jsx(t,{children:"Media"})]})}),e.jsx(T,{children:c.map((s,r)=>e.jsxs(h,{children:[e.jsx(t,{children:r+1}),e.jsx(o,{children:s.title}),e.jsx(o,{children:s.price}),e.jsx(o,{children:s.description&&s.description.length>50?`${s.description.substring(0,50)}...`:s.description}),e.jsx(o,{children:f(s.uploaded_at)}),e.jsx(o,{children:u(s.file_url)?e.jsxs("video",{width:"100",controls:!0,children:[e.jsx("source",{src:s.file_url,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx(N,{src:s.file_url,alt:s.media_file||"media",width:100,thumbnail:!0})})]},s.id))})]}):e.jsx("div",{className:"text-center py-5",children:"No blog posts found"})})]})})};export{$ as default};
