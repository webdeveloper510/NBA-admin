import{r as o,h as w,j as e,C as S}from"./index-ceYUE2lg.js";/* empty css              */import{C as u}from"./index.esm-D31th84k.js";import{g as k}from"./api-Bj3sD_V7.js";import{C as E,a as _}from"./CCardBody-B3wk5VGO.js";import{C as M}from"./CCardHeader-Bt-TiqJ1.js";import{C as P,a as B,b as j,c as r,d as F,e as i}from"./CTable-BvcRV7pA.js";import{C as H}from"./CImage-Ces_cI41.js";import{c as L,a as R}from"./cil-trash-prAk5aip.js";import{C as U,a as V,b as A,c as $}from"./CModalHeader-DY4DP2jp.js";import{C as d}from"./CFormInput-DD74c6sY.js";import{C as O}from"./CFormTextarea-BHkOH8AC.js";import{a as C}from"./CContainer-BfNIDCwl.js";import"./DefaultLayout-CM6Ku-CA.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-EGmyGbE8.js";import"./CFormControlValidation-ByzU-ann.js";import"./CFormLabel-COmzxBw2.js";const ie=()=>{var m;const[p,f]=o.useState([]),[b,g]=o.useState(!0),[x,h]=o.useState(null),[v,c]=o.useState(!1),[t,l]=o.useState(null);w(),o.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("accessToken")||"",n=await k(a);n&&n.status===200?f(n.data):h("Unexpected data format")}catch(a){h("Error fetching data"),console.error(a)}finally{g(!1)}})()},[]);const y=s=>s?[".mp4",".avi",".mov",".wmv",".flv",".mkv"].some(n=>s.toLowerCase().endsWith(n)):!1,N=s=>s?new Date(s).toISOString().split("T")[0]:"",T=s=>{l(s),c(!0)},D=s=>{console.log("Delete item with ID:",s)};return e.jsxs(e.Fragment,{children:[e.jsxs(E,{className:"mb-4",children:[e.jsx(M,{className:"d-flex justify-content-between align-items-center",children:e.jsx("h3",{children:"Recent Added Pick"})}),e.jsx(_,{children:b?e.jsxs("div",{className:"text-center py-5",children:[e.jsx(S,{color:"primary"}),e.jsx("p",{className:"mt-3",children:"Loading data..."})]}):x?e.jsx("div",{className:"text-danger text-center py-4",children:x}):p.length>0?e.jsxs(P,{hover:!0,striped:!0,responsive:!0,className:"table table-hover table-striped custom-table",children:[e.jsx(B,{children:e.jsxs(j,{children:[e.jsx(r,{children:"#"}),e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Price ($)"}),e.jsx(r,{children:"Description"}),e.jsx(r,{children:"Upload Date"}),e.jsx(r,{children:"Media"}),e.jsx(r,{children:"Actions"})]})}),e.jsx(F,{children:p.map((s,a)=>e.jsxs(j,{children:[e.jsx(r,{children:a+1}),e.jsx(i,{children:s.title}),e.jsx(i,{children:s.price}),e.jsx(i,{children:e.jsx("div",{className:"ellipsis",title:s.description,children:s.description})}),e.jsx(i,{children:N(s.uploaded_at)}),e.jsx(i,{children:y(s.file_url)?e.jsxs("video",{width:"100",controls:!0,children:[e.jsx("source",{src:s.file_url,type:"video/mp4"}),"Your browser does not support the video tag."]}):e.jsx(H,{src:s.file_url,alt:s.media_file||"media",width:100,thumbnail:!0})}),e.jsxs(i,{children:[e.jsx(u,{icon:L,className:"me-2 text-primary",role:"button",onClick:()=>T(s)}),e.jsx(u,{icon:R,className:"text-danger",role:"button",onClick:()=>D(s.id)})]})]},s.id))})]}):e.jsx("div",{className:"text-center py-5",children:"No blog posts found"})})]}),e.jsxs(U,{visible:v,onClose:()=>c(!1),children:[e.jsx(V,{closeButton:!0,children:"Edit Pick"}),e.jsxs(A,{children:[e.jsx(d,{label:"Title",value:(t==null?void 0:t.title)||"",onChange:s=>l(a=>({...a,title:s.target.value})),className:"mb-3"}),e.jsx(d,{label:"Price ($)",type:"number",value:(t==null?void 0:t.price)||"",onChange:s=>l(a=>({...a,price:s.target.value})),className:"mb-3"}),e.jsx(O,{label:"Description",value:(t==null?void 0:t.description)||"",onChange:s=>l(a=>({...a,description:s.target.value})),className:"mb-3 descriptionpop",rows:4}),e.jsx(d,{label:"Upload Date",type:"date",value:((m=t==null?void 0:t.uploaded_at)==null?void 0:m.split("T")[0])||"",onChange:s=>l(a=>({...a,uploaded_at:s.target.value})),className:"mb-3"}),e.jsx(d,{label:"Media URL",value:(t==null?void 0:t.file_url)||"",onChange:s=>l(a=>({...a,file_url:s.target.value})),className:"mb-3"})]}),e.jsxs($,{children:[e.jsx(C,{color:"secondary",onClick:()=>c(!1),children:"Cancel"}),e.jsx(C,{color:"primary",onClick:()=>{console.log("Saving updated data:",t),c(!1)},children:"Save Changes"})]})]})]})};export{ie as default};
