import{r,j as s}from"./index-CtwYiYvO.js";/* empty css                 */import{C as D}from"./index.esm-CwAUwQb3.js";import{e as O,f as W,h as $}from"./api-BirPwZXW.js";import{R as q}from"./index-CZpMkzyz.js";import{C as P,a as Q}from"./CCardBody-DipSZ0lb.js";import{C as Y}from"./CCardHeader-C4i2hG_j.js";import{C as z}from"./CAlert-OGTQprjb.js";import{C as G,a as J,b as L,c as o,d as K,e as n}from"./CTable-B5gVEULH.js";import{C as X}from"./CImage-CRHNAHS_.js";import{c as Z,a as ee}from"./cil-trash-prAk5aip.js";import{C as S,a as T,b as A}from"./CModalHeader-C1oaEp8h.js";import{C as g}from"./CFormInput-BaqrYAwD.js";import{C as b}from"./CFormLabel-BjuBpC1C.js";import{C as se}from"./CFormSelect-BT6lIQQj.js";import{C as M}from"./CModalFooter-CCy_SSBu.js";import{a as x}from"./CButton-Cf3gR883.js";import{C as ie}from"./CModalTitle-BtTuEiAI.js";import"./isEqual-wOFi6sWl.js";import"./DefaultLayout-md8ywcpp.js";import"./CContainer-CPipLLWc.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-BWMHc44O.js";import"./CFormControlValidation-D70q0bWe.js";const Le=()=>{const[c,v]=r.useState([]),[w,m]=r.useState(!1),[R,y]=r.useState(null),[i,d]=r.useState({id:"",title:"",images:[],imageFiles:[],description:"",date:"",sports_name:""}),[F,I]=r.useState({title:"",description:"",date:"",sports_name:""}),_=R||(i==null?void 0:i.imageFiles),[j,B]=r.useState({visible:!1,color:"",message:""}),[N,p]=r.useState(!1);r.useEffect(()=>{f()},[]);const C=(e,l)=>{B({visible:!0,color:e,message:l}),setTimeout(()=>B({visible:!1,color:"",message:""}),5e3)},f=()=>{O().then(e=>{var l,t;((l=e.data)==null?void 0:l.status)==200?v((t=e==null?void 0:e.data)==null?void 0:t.data):v([])}).catch(e=>{console.log(e)})},k=e=>{p(e)},H=()=>{$(N).then(e=>{var l,t;e.status==200?(f(),p(!1),C("success",(l=e==null?void 0:e.data)==null?void 0:l.message)):(p(!1),C("danger",(t=e==null?void 0:e.data)==null?void 0:t.message))}).catch(e=>{console.log("error",e)})},U=e=>{d({id:e==null?void 0:e.id,title:e==null?void 0:e.title,images:[{url:e==null?void 0:e.file_url}],imageFiles:[],description:e==null?void 0:e.description,date:e==null?void 0:e.created_at,sports_name:e==null?void 0:e.sports_type}),y(e==null?void 0:e.file_url),m(!0)},u=e=>{const{name:l,value:t}=e.target;d({...i,[l]:t})},V=e=>{const l=e.target.files,t=e.target.files[0];if(t){const a=URL.createObjectURL(t);y(a)}if(l.length>0){const a=Array.from(l).map(h=>({url:URL.createObjectURL(h),filename:h.name,file:h}));d({...i,images:[...i.images,...a],imageFiles:[...i.imageFiles,...l]}),F.images&&I({...F,images:""})}},E=async e=>{e.preventDefault();try{const l=i.id,t=new FormData;t.append("title",i.title),t.append("date",i.date),t.append("description",i.description),t.append("sports_name",i.sports_name),i.imageFiles.forEach(h=>{t.append("file",h)});const a=await W(l,t);a&&a.status===200?(C("success","Media saved successfully!"),m(!1),f(),d({title:"",sports_name:"",description:"",images:[],imageFiles:[]})):(console.log("danger",`Error: ${(a==null?void 0:a.error)||"Failed to save media"}`),m(!1))}catch(l){console.log("danger",`Error: ${l.message||"Unknown error"}`)}finally{}};return s.jsxs(s.Fragment,{children:[s.jsxs(P,{className:"",children:[s.jsx(Y,{children:s.jsx("h3",{children:"Blog List"})}),s.jsxs(Q,{children:[j.visible&&s.jsx(z,{color:j.color,children:j.message}),s.jsxs(G,{striped:!0,hover:!0,responsive:!0,className:"custom-table",children:[s.jsx(J,{children:s.jsxs(L,{children:[s.jsx(o,{children:"#"}),s.jsx(o,{children:"Title"}),s.jsx(o,{children:"Sport Type"}),s.jsx(o,{children:"Date"}),s.jsx(o,{children:"Image"}),s.jsx(o,{children:"Description"}),s.jsx(o,{children:"Actions"})]})}),s.jsx(K,{children:(c==null?void 0:c.length)>0?c==null?void 0:c.map((e,l)=>{var t;return s.jsxs(L,{children:[s.jsx(n,{children:l+1}),s.jsx(n,{title:e.title,children:(t=e==null?void 0:e.title)==null?void 0:t.slice(0,30)}),s.jsx(n,{children:e.sports_type}),s.jsx(n,{children:e.created_at}),s.jsx(n,{children:s.jsx(X,{src:e==null?void 0:e.file_url,alt:(e==null?void 0:e.media_file)||"media",width:100,thumbnail:!0})}),s.jsx(n,{children:s.jsx("div",{dangerouslySetInnerHTML:{__html:e.description},className:"ellipsis single-line",title:e.description})}),s.jsxs(n,{children:[s.jsx(D,{icon:Z,className:"me-2 text-primary",role:"button",onClick:()=>U(e)}),s.jsx(D,{icon:ee,className:"text-danger",role:"button",onClick:()=>k(e==null?void 0:e.id)})]})]},l)}):s.jsx(s.Fragment,{})})]})]})]}),s.jsxs(S,{visible:w,onClose:()=>m(!1),children:[s.jsx(T,{children:"Edit Blog"}),s.jsxs(A,{children:[s.jsx(g,{label:"Title",name:"title",value:(i==null?void 0:i.title)||"",onChange:u,className:"mb-3"}),s.jsx(b,{htmlFor:"sports_name",children:"Sport Name"}),s.jsxs(se,{name:"sports_name",id:"sports_name",value:i==null?void 0:i.sports_name,onChange:u,required:!0,className:"mb-3",children:[s.jsx("option",{value:"",children:i!=null&&i.sports_name?i==null?void 0:i.sports_name:"Select a sport"}),s.jsx("option",{value:"MLB",children:"MLB"}),s.jsx("option",{value:"NBA",children:"NBA"}),s.jsx("option",{value:"NHL",children:"NHL"}),s.jsx("option",{value:"NCAAF",children:"NCAAF"}),s.jsx("option",{value:"CFB",children:"CFB"}),s.jsx("option",{value:"NFL",children:"NFL"})]}),s.jsx(g,{label:"Date",type:"date",name:"date",value:(i==null?void 0:i.date)||"",onChange:u,className:"mb-3"}),_&&s.jsx("div",{className:"mb-3",children:s.jsx("img",{src:_,alt:"Current",style:{maxWidth:"200px",borderRadius:"8px"}})}),s.jsx(g,{type:"file",accept:"image/*",name:"image",id:"image",className:"mb-3",onChange:V}),s.jsx(b,{htmlFor:"description",children:"Description"}),s.jsx(q,{theme:"snow",value:(i==null?void 0:i.description)||"",onChange:e=>d({...i,description:e}),placeholder:"Write blog content here...",style:{height:"200px",marginBottom:"50px"}})]}),s.jsxs(M,{children:[s.jsx(x,{color:"secondary",onClick:()=>m(!1),children:"Cancel"}),s.jsx(x,{color:"primary",onClick:E,children:"Save Changes"})]})]}),s.jsxs(S,{alignment:"center",visible:N,onClose:()=>p(!1),"aria-labelledby":"LiveDemoExampleLabel",children:[s.jsx(T,{children:s.jsx(ie,{id:"LiveDemoExampleLabel",children:"Delete Blog"})}),s.jsx(A,{children:s.jsxs("div",{children:[s.jsx("h4",{children:"Are you Sure?"}),s.jsx("p",{children:"You want to delete this blog."})]})}),s.jsxs(M,{children:[s.jsx(x,{color:"secondary",onClick:()=>p(!1),children:"Close"}),s.jsx(x,{color:"primary",onClick:()=>H(),children:"Delete"})]})]})]})};export{Le as default};
