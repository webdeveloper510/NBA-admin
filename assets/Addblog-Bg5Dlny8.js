import{r as c,h as F,j as e}from"./index-Cq2pfyGd.js";import{R as B}from"./index-DvD8bxCM.js";/* empty css                */import{c as b}from"./api-gU1Zkls4.js";import{C as y,a as A}from"./CCardBody-C4g_cNv8.js";import{C as N}from"./CCardHeader-BARF6Xbj.js";import{C as _}from"./CAlert-BFU5pfnP.js";import{C as S}from"./CForm-CtoNQOVY.js";import{C as p,a as i}from"./CRow-CHbQS0nr.js";import{C as l}from"./CFormLabel-CAa8szbJ.js";import{C as h}from"./CFormInput-DlCr1gus.js";import{C as w}from"./CFormSelect-CctcTxS8.js";import{a as D}from"./CButton-BOPn87L9.js";import"./isEqual-CEpmwJQo.js";import"./DefaultLayout-CpD2w5VC.js";import"./CContainer-Cb55oICj.js";import"./index.esm-CW0RKQ3s.js";import"./cil-lock-locked-DmxpJbVL.js";import"./CFormControlWrapper-Ds4FwxpG.js";import"./CFormControlValidation-DqlBbJer.js";const X=()=>{const[s,n]=c.useState({title:"",images:[],imageFiles:[],description:"",date:"",sports_name:""}),[g,x]=c.useState({title:"",description:"",date:"",sports_name:""}),[m,u]=c.useState({visible:!1,color:"",message:""}),C=F(),j=(r,t)=>{u({visible:!0,color:r,message:t}),setTimeout(()=>u({visible:!1,color:"",message:""}),5e3)},d=r=>{const{name:t,value:a}=r.target;n({...s,[t]:a})},f=r=>{const t=r.target.files;if(t.length>0){const a=Array.from(t).map(o=>({url:URL.createObjectURL(o),filename:o.name,file:o}));n({...s,images:[...s.images,...a],imageFiles:[...s.imageFiles,...t]}),g.images&&x({...g,images:""})}},v=async r=>{r.preventDefault();try{const t=new FormData;t.append("title",s.title),t.append("date",s.date),t.append("description",s.description),t.append("sports_name",s.sports_name),s.imageFiles.forEach(o=>{t.append("file",o)});const a=await b(t);a&&a.status===201?(j("success","Media saved successfully!"),C("/list-blog"),n({title:"",sports_name:"",description:"",images:[],imageFiles:[]})):console.log("danger",`Error: ${(a==null?void 0:a.error)||"Failed to save media"}`)}catch(t){console.log("danger",`Error: ${t.message||"Unknown error"}`)}finally{}};return e.jsxs(y,{className:"",children:[e.jsx(N,{children:e.jsx("h3",{children:"Add New Blog"})}),e.jsxs(A,{children:[m.visible&&e.jsx(_,{color:m.color,children:m.message}),e.jsxs(S,{encType:"multipart/form-data",children:[e.jsxs(p,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"title",children:"Blog Title"}),e.jsx(h,{type:"text",name:"title",id:"title",value:s.title,onChange:d,required:!0})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(h,{type:"date",name:"date",id:"date",value:s.date,onChange:d,required:!0})]})]}),e.jsxs(p,{className:"mb-3",children:[e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"sports_name",children:"Sport Name"}),e.jsxs(w,{name:"sports_name",id:"sports_name",value:s.sports_name,onChange:d,required:!0,children:[e.jsx("option",{value:"",children:"Select a sport"}),e.jsx("option",{value:"MLB",children:"MLB"}),e.jsx("option",{value:"NBA",children:"NBA"}),e.jsx("option",{value:"NHL",children:"NHL"}),e.jsx("option",{value:"NCAAF",children:"NCAAF"}),e.jsx("option",{value:"CFB",children:"CFB"})]})]}),e.jsxs(i,{md:6,children:[e.jsx(l,{htmlFor:"image",children:"Blog Image"}),e.jsx(h,{type:"file",name:"image",id:"image",accept:"image/*",onChange:f})]})]}),e.jsx(p,{className:"mb-3",children:e.jsxs(i,{md:12,children:[e.jsx(l,{htmlFor:"description",children:"Blog Description"}),e.jsx(B,{theme:"snow",value:s.description,onChange:r=>n({...s,description:r}),placeholder:"Write blog content here...",style:{height:"200px",marginBottom:"50px"}})]})}),e.jsx(D,{type:"button",onClick:r=>v(r),color:"primary",children:"Submit Blog"})]})]})]})};export{X as default};
